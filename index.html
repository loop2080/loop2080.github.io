<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Responsive Video Layout with Dynamic Background</title>
  <style>
    /* Base styles for desktop (full-screen video background) */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden; /* Prevent scrolling on desktop */
    }

    /* Full-screen video for desktop */
    #background-video {
      position: absolute;
      top: 50%;
      left: 50%;
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      transform: translate(-50%, -50%);
      object-fit: cover;
      z-index: 0;
    }

    /* Logo container positioned at the top-left on desktop */
    #logo-container {
      position: absolute;
      top: 0;
      left: 5%;
      width: 480px;
      z-index: 1;
      /* The background-color will be updated dynamically */
    }

    /* Logo image styling */
    #logo {
      width: 100%;
      height: auto;
      display: block;
    }

    /* Text container positioned at the bottom-right on desktop */
    #text-container {
      position: absolute;
      right: 5%;
      bottom: 5%;
      width: 300px;
      /* The background-color will be updated dynamically */
      color: #fff;
      padding: 15px;
      border-radius: 5px;
      z-index: 2;
      font-family: sans-serif;
      line-height: 1.4;
    }
    #text-container h2,
    #text-container p {
      margin: 0 0 10px 0;
    }

    /* Mobile and tablet layout adjustments */
    @media (max-width: 1024px) {
      /* Allow scrolling if needed */
      html, body {
        overflow: auto;
        height: auto;
      }

      /* Use flexbox to reorder the elements */
      body {
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      /* Video becomes part of the content flow and appears last */
      #background-video {
        position: static;
        transform: none;
        width: 100%;
        height: auto;
        min-width: 0;
        min-height: 0;
        object-fit: contain;
        order: 3;
        z-index: auto;
      }

      /* Logo container: remains at the top */
      #logo-container {
        position: static;
        width: 80%;
        max-width: 480px;
        order: 1;
        margin: 10px auto;
      }

      /* Text container: appears between the logo and video */
      #text-container {
        position: static;
        width: 90%;
        order: 2;
        margin: 10px auto;
        /* Fallback background */
        background: rgba(0, 0, 0, 0.7);
      }
    }
  </style>
</head>
<body>
  <!-- Video Background with crossOrigin attribute (if needed) -->
  <video autoplay loop muted playsinline id="background-video" crossOrigin="anonymous">
    <source src="spider1.mp4" type="video/mp4">
    Your browser does not support the video tag.
  </video>

  <!-- Logo Container (for dynamic background) -->
  <div id="logo-container">
    <!-- SVG Logo -->
    <img src="fixbot logo svg.svg" alt="Fixbot Logo" id="logo" />
  </div>

  <!-- Text Container -->
  <div id="text-container">
    <h2><strong>Revolutionizing Lighting Pole Maintenance with AI & Robotics</strong></h2>
    <p>
      <strong>Fixbot</strong> is transforming the way lighting pole maintenance companies operate.
      Using <strong>cutting-edge AI</strong> and <strong>advanced robotics</strong>, we help businesses
      <strong>optimize efficiency</strong>, reduce costs, and enhance safety. Our
      <strong>smart automation solutions</strong> streamline inspections, repairs, and predictive
      maintenanceâ€”minimizing downtime and maximizing performance. Stay ahead with
      <strong>data-driven insights</strong> and precision technology. <strong>Fixbot</strong> is
      the future of smart infrastructure management.
    </p>
    <p><strong>Optimize. Automate. Illuminate.</strong></p>
  </div>

  <!-- Hidden canvas for extracting video frame data -->
  <canvas id="video-canvas" style="display: none;"></canvas>

  <script>
    // Get references to elements
    const video = document.getElementById('background-video');
    const canvas = document.getElementById('video-canvas');
    const ctx = canvas.getContext('2d');
    const logoContainer = document.getElementById('logo-container');
    const textContainer = document.getElementById('text-container');

    function updateAverageColor() {
      if (video.readyState >= 2) { // Ensure video data is available
        // Use a small canvas for performance
        const canvasWidth = 160;
        const canvasHeight = 90;
        canvas.width = canvasWidth;
        canvas.height = canvasHeight;

        try {
          // Draw the current video frame onto the canvas
          ctx.drawImage(video, 0, 0, canvasWidth, canvasHeight);
        } catch (error) {
          console.error("Error drawing video frame:", error);
          return;
        }

        try {
          // Get the pixel data from the canvas
          const frame = ctx.getImageData(0, 0, canvasWidth, canvasHeight);
          const data = frame.data;
          let r = 0, g = 0, b = 0;
          const pixelCount = data.length / 4;

          // Sum up all the red, green, and blue values
          for (let i = 0; i < data.length; i += 4) {
            r += data[i];
            g += data[i + 1];
            b += data[i + 2];
          }

          // Calculate average color values
          r = Math.round(r / pixelCount);
          g = Math.round(g / pixelCount);
          b = Math.round(b / pixelCount);
          const avgColor = `rgb(${r}, ${g}, ${b})`;

          // Apply smooth transitions and update the backgrounds
          logoContainer.style.transition = 'background-color 0.5s ease';
          textContainer.style.transition = 'background-color 0.5s ease';
          logoContainer.style.backgroundColor = avgColor;
          textContainer.style.backgroundColor = avgColor;
        } catch (error) {
          console.error("Error retrieving image data:", error);
        }
      }
    }

    // Start updating the background color when the video can play
    video.addEventListener('canplay', function() {
      setInterval(updateAverageColor, 500);
    });
  </script>
</body>
</html>
